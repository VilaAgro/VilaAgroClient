<div class="admin-dashboard">
  <div class="header">
    <h1>Dashboard Administrativo</h1>
  </div>

  @if (loading) {
    <div class="loading-container">
      <p-progressSpinner />
      <p>Carregando estatísticas...</p>
    </div>
  } @else if (stats) {
    <div class="stats-grid">
      <p-card styleClass="stat-card stat-card-pending">
        <ng-template pTemplate="header">
          <div class="card-icon">
            <i class="pi pi-inbox"></i>
          </div>
        </ng-template>
        <ng-template pTemplate="title">
          <div class="stat-value">{{ stats.pendingRegistrations }}</div>
        </ng-template>
        <ng-template pTemplate="subtitle">
          Solicitações Pendentes
        </ng-template>
        <ng-template pTemplate="content">
          <p>Novos cadastros aguardando aprovação.</p>
        </ng-template>
        <ng-template pTemplate="footer">
          <button
            pButton
            label="Ver Solicitações"
            class="p-button-sm w-full"
            (click)="navigateToUsers()"
          ></button>
        </ng-template>
      </p-card>

      <p-card styleClass="stat-card stat-card-waiting">
        <ng-template pTemplate="header">
          <div class="card-icon">
            <i class="pi pi-clock"></i>
          </div>
        </ng-template>
        <ng-template pTemplate="title">
          <div class="stat-value">{{ stats.waitingList }}</div>
        </ng-template>
        <ng-template pTemplate="subtitle">
          Fila de Espera
        </ng-template>
        <ng-template pTemplate="content">
          <p>Usuários aprovados aguardando alocação.</p>
        </ng-template>
        <ng-template pTemplate="footer">
          <button
            pButton
            label="Alocar Pontos"
            class="p-button-sm p-button-secondary w-full"
            (click)="navigateToUsers()"
          ></button>
        </ng-template>
      </p-card>

      <p-card styleClass="stat-card stat-card-justifications">
        <ng-template pTemplate="header">
          <div class="card-icon">
            <i class="pi pi-file-edit"></i>
          </div>
        </ng-template>
        <ng-template pTemplate="title">
          <div class="stat-value">{{ stats.pendingJustifications }}</div>
        </ng-template>
        <ng-template pTemplate="subtitle">
          Justificativas Pendentes
        </ng-template>
        <ng-template pTemplate="content">
          <p>Faltas aguardando análise para abono.</p>
        </ng-template>
        <ng-template pTemplate="footer">
          <button
            pButton
            label="Revisar"
            class="p-button-sm p-button-danger w-full"
            (click)="navigateToAttendance()"
          ></button>
        </ng-template>
      </p-card>

      <p-card styleClass="stat-card stat-card-occupation">
        <ng-template pTemplate="header">
          <div class="card-icon">
            <i class="pi pi-chart-line"></i>
          </div>
        </ng-template>
        <ng-template pTemplate="title">
          <div class="stat-value">{{ stats.occupationRate.toFixed(1) }}%</div>
        </ng-template>
        <ng-template pTemplate="subtitle">
          Taxa de Ocupação
        </ng-template>
        <ng-template pTemplate="content">
          <p>{{ stats.occupiedSalePoints }} de {{ stats.totalSalePoints }} pontos ocupados.</p>
        </ng-template>
        <ng-template pTemplate="footer">
          <button
            pButton
            label="Ver Pontos"
            class="p-button-sm p-button-secondary w-full"
            (click)="navigateToSalePoints()"
          ></button>
        </ng-template>
      </p-card>
    </div>

    <div class="actions-grid">
      <p-card header="Ações Rápidas">
        <div class="p-fluid">
          <button
            pButton
            label="Gerenciar Usuários"
            class="mb-2"
            icon="pi pi-users"
            (click)="navigateToUsers()"
          ></button>
          <button
            pButton
            label="Pontos de Venda"
            class="p-button-secondary mb-2"
            icon="pi pi-map-marker"
            (click)="navigateToSalePoints()"
          ></button>
          <button
            pButton
            label="Frequência"
            class="p-button-secondary mb-2"
            icon="pi pi-calendar"
            (click)="navigateToAttendance()"
          ></button>
          <button
            pButton
            label="Feiras"
            class="p-button-secondary"
            icon="pi pi-shopping-bag"
            (click)="navigateToFairs()"
          ></button>
        </div>
      </p-card>
    </div>
  }
</div>
